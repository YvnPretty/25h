<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obtener Entry IDs del Formulario</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        code {
            background-color: #1f2937;
            color: #f9fafb;
            padding: 1rem;
            border-radius: 8px;
            display: block;
            overflow-x: auto;
            margin: 1rem 0;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }
        .btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8">
        <h1 class="text-3xl font-bold mb-6 text-gray-800">Obtener Entry IDs del Formulario</h1>
        
        <div class="mb-8 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <h2 class="font-bold text-blue-800 mb-2">Tu Form ID:</h2>
            <p class="text-gray-700 font-mono text-sm">1FAIpQLSdYK9Vde8Faed_4BF5H7aeECn-zrJr8wlubfdpZlHn1c0-wbg</p>
        </div>

        <div class="mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
            <h2 class="font-bold text-yellow-800 mb-4">Instrucciones:</h2>
            <ol class="list-decimal list-inside space-y-2 text-gray-700">
                <li>Abre tu formulario de Google en modo <strong>EDICI√ìN</strong>: 
                    <a href="https://docs.google.com/forms/d/1FAIpQLSdYK9Vde8Faed_4BF5H7aeECn-zrJr8wlubfdpZlHn1c0-wbg/edit" 
                       target="_blank" class="text-blue-600 underline">Abrir en modo edici√≥n</a>
                </li>
                <li>Abre la consola del navegador (presiona <strong>F12</strong>)</li>
                <li>Ve a la pesta√±a <strong>"Console"</strong></li>
                <li>Copia y pega el script de abajo</li>
                <li>Presiona <strong>Enter</strong> para ejecutarlo</li>
                <li>Copia la configuraci√≥n que aparece</li>
            </ol>
        </div>

        <div class="mb-8">
            <h2 class="font-bold text-gray-800 mb-4">Script para la Consola:</h2>
            <code id="scriptCode">(function() {
    // Obtener todos los inputs del formulario
    const form = document.querySelector('form[action*="formResponse"]');
    if (!form) {
        console.error('No se encontr√≥ el formulario. Aseg√∫rate de estar en modo edici√≥n.');
        return;
    }
    
    const inputs = form.querySelectorAll('input[type="radio"], input[type="checkbox"]');
    const entryIds = {};
    const seen = new Set();
    
    inputs.forEach((input, index) => {
        const entryId = input.name;
        if (entryId && entryId.startsWith('entry.') && !seen.has(entryId)) {
            seen.add(entryId);
            // Determinar qu√© pregunta es bas√°ndose en el orden
            const questionNum = Object.keys(entryIds).length + 1;
            if (questionNum <= 10) {
                entryIds[`q${questionNum}`] = entryId;
            }
        }
    });
    
    // Si no encontramos suficientes, intentar otro m√©todo
    if (Object.keys(entryIds).length < 10) {
        const allInputs = form.querySelectorAll('input[name^="entry."]');
        const uniqueEntries = new Set();
        allInputs.forEach(input => {
            if (input.name && input.name.startsWith('entry.')) {
                uniqueEntries.add(input.name);
            }
        });
        
        const entriesArray = Array.from(uniqueEntries).slice(0, 10);
        entriesArray.forEach((entryId, index) => {
            entryIds[`q${index + 1}`] = entryId;
        });
    }
    
    console.log('=== CONFIGURACI√ìN PARA 25.HTML ===');
    console.log('const GOOGLE_FORM_CONFIG = {');
    console.log('    enabled: true,');
    console.log("    formId: '1FAIpQLSdYK9Vde8Faed_4BF5H7aeECn-zrJr8wlubfdpZlHn1c0-wbg',");
    console.log('    entryIds: {');
    Object.keys(entryIds).sort().forEach(key => {
        console.log(`        ${key}: '${entryIds[key]}',`);
    });
    console.log('    }');
    console.log('};');
    
    console.log('\n=== ENTRY IDS ENCONTRADOS ===');
    Object.keys(entryIds).sort().forEach(key => {
        console.log(`${key}: ${entryIds[key]}`);
    });
    
    return entryIds;
})();</code>
            <button onclick="copiarScript()" class="btn mt-4">üìã Copiar Script</button>
        </div>

        <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
            <h2 class="font-bold text-green-800 mb-2">Una vez que tengas los Entry IDs:</h2>
            <ol class="list-decimal list-inside space-y-2 text-gray-700">
                <li>Abre el archivo <code class="inline bg-gray-200 px-2 py-1 rounded">25.html</code></li>
                <li>Busca la secci√≥n <code class="inline bg-gray-200 px-2 py-1 rounded">GOOGLE_FORM_CONFIG</code> (alrededor de la l√≠nea 560)</li>
                <li>Reemplaza la configuraci√≥n con la que obtuviste</li>
                <li>Guarda el archivo</li>
                <li>Reconstruye el contenedor: <code class="inline bg-gray-200 px-2 py-1 rounded">docker-compose up -d --build</code></li>
            </ol>
        </div>
    </div>

    <script>
        function copiarScript() {
            const code = document.getElementById('scriptCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ Script copiado al portapapeles!\n\nAhora:\n1. Abre tu formulario en modo edici√≥n\n2. Abre la consola (F12)\n3. Pega el script y presiona Enter');
            }).catch(err => {
                console.error('Error al copiar:', err);
                alert('Error al copiar. Por favor, selecciona y copia manualmente el script.');
            });
        }
    </script>
</body>
</html>

